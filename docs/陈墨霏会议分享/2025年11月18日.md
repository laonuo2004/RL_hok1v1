
汇报时间并不充裕（每人平均5-10分钟），我考虑着重讲**动作空间——奖励设计——原始模型效果——可能的优化方向**这一套思路，其他部分就不讲或者带过。

主要根据 PPO 的实现来讲

文档是旧版的（还是什么三个英雄呢）
## 环境
train_env_conf.toml

对手智能体和评估对手类型的区别：分别指的是训练时和评估时。PPO是基于演员评论家的框架的。selfplay、common_ai、自定义的模型 id。

环境返回信息、英雄特征、帧状态

环境监控信息

帧(frame)和步(step)

## 动作空间

比实验一要复杂很多，包含了**按钮、拖动方向（移动方向和技能释放方向）、作用对象（同方向上选择？）** ，导致组合得到的总动作空间大小很大。

### 掩码机制
agent.py 的 _sample_masked_action

剪枝，结合规则排除掉无效动作，legal action的softmax
## 奖励

目标还是击杀对方英雄更多次
### 当前设计

英雄血量、防御塔血量、经济、经验、法力值、死亡惩罚、击杀奖励、补刀奖励、前进奖励

### 计算逻辑

零和设计，对抗

时间衰减：倾向于快速结束游戏

### 训练与评估

训练工作流

训练中评估：默认使用common_ai，比较客观。也可自定义
训练后评估：暂时还没太看懂

预训练模型：没有官方的，加载自己的
![[Pasted image 20251118135930.png]]
#### GAE优势函数计算

课件没有课上好像提过

advantage原本只算一时间步的，这个算好多步然后加权平均

将不同长度的 $k$ 步 TD 残差进行指数加权平均，得到一个兼顾偏差和方差的优势估计

更长的轨迹和更激进的策略更新

## 原始模型效果

开局抢占优势位置，时机？
不会主动趁对面死了回城回血（能回血吗）

## 可能的优化方向

### 参数优化

可行性高

### 建模优化、奖励设计、学习策略

可行性高

参考当前模型效果和获胜技巧。

召唤师技能、时机判断（回城什么的）、走位策略

学习策略：课程学习，将复杂、综合的学习目标分解为多阶段、更小规模的学习任务。
对手模型选择：

#### 获胜技巧

来自[百度百科]([墨家机关道_百度百科](https://baike.baidu.com/item/%E5%A2%A8%E5%AE%B6%E6%9C%BA%E5%85%B3%E9%81%93/18800777))

也可以看看b站视频或者参考实战经验
##### 英雄选择

推荐用远程英雄，毕竟 1 VS 1 玩的是谁能耗而且远程英雄有伤害和控制的优先选择，控制技能可以用来保命和完成一些技能的衔接。

并且在符文也要选择合适的来进行操作，与此同时出装顺序和针对性的出装也是影响战局的关键性因素。 [1]

> 
好像是远程英雄

##### 召唤师技能

推荐携带治疗术。在使用时治疗术不要等到残血时再使用，因为治疗术的冷却很短，少血就使用随时保证满血状态这样才能避免突然的情况，远程英雄还能在近战补兵时利用指向技能耗血，而近战也要利用小兵消失时的空档使用突进接近远程。 [1]

##### 操作技巧

在《[王者荣耀](https://baike.baidu.com/item/%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80/18752941?fromModule=lemma_inlink)》墨家机关道中，我们最重要的就是对于兵线的控制，只要将兵线推到了地方防御塔下，那么我们就占据了主动，因为这是 1 VS 1 玩法，每方的防御塔都只有一个，只要防御塔被摧毁了，那么敌军就可以直捣黄龙。

在整个地图的中下方，每隔一段时间会刷新一个回复BUFF，我们一定要尽量控制住这一块区域，只要不要让BUFF被敌方夺得，那么我们就可以慢慢地消耗对方，逐渐取得主动权

### 模型优化、算法优化

可行性低

模型：可换用Transformer
算法：可换用SAC等。

时间有限，先基于PPO + LSTM（给出代码已实现了一部分）

### others



连招
野怪